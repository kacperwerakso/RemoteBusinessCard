<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>
    <script src="punycode.js"></script>
    <title>Weather</title>
</head>
<body class="body">
    <div class="menu">
        <nav>
            <button class="btnmenu">
                <i class="fas fa-bars"></i>
                <i class="fas fa-times hide"></i>
            </button>
            <ul class="navul">
                <br><br><li><a class="menutext1"><p>Generator</p></a></li><br>
                <li><a href="QrCode.html" class="menutext"><p>Kodów QR</p></a></li>
                <li><a href="genPass.html" class="menutext"><p>Haseł</p></a></li>
                <li><a href="genColor.html" class="menutext"><p>Kolorów</p></a></li>
                <li><a href="quote.html" class="menutext"><p>Cytatów</p></a></li>
                <li><a href="curiosity.html" class="menutext"><p>Ciekawostek</p></a></li><hr class="hrDarkMode">
                <li><a class="menutext1"><p>Kalkulator</p></a></li><br>
                <li><a href="Calculator.html" class="menutext"><p>Standardowy</p></a></li>
                <li><a href="bmi.html" class="menutext"><p>BMI</p></a></li>
                <li><a href="kcal.html" class="menutext"><p>Zapotrzebowania kcal</p></a></li>
                <li><a href="temp.html" class="menutext"><p>Stopni</p></a></li>
                <li><a href="sizes.html" class="menutext"><p>Miary</p></a></li><hr class="hrDarkMode">
                <li><a class="menutext1"><p>Finanse</p></a></li><br>
                <li><a href="currency.html" class="menutext"><p>Waluty</p></a></li>
                <li><a href="KryptoCurrency.html" class="menutext"><p>Kryptowaluty</p></a></li><hr class="hrDarkMode">
                <li><a class="menutext1"><p>Różne</p></a></li><br>
                <li><a href="weather.html" class="menutext"><p>Pogoda</p></a></li>
                <li><a href="map.html" class="menutext"><p>Mapa</p></a></li><br>
            </ul>
        </nav>
        <div>
            <a href="index.html" class="housebtn"><i class="fa-solid fa-house"></i></a>

        </div>
        <div>
            <button class="darkMode">
                <i class="fas fa-circle-half-stroke"></i>
            </button>
        </div>
        <div>

        </div>
        <div>
            <button id="translateButton"><img class="flag" src="./images/usa.png"></button>
        </div>
        <div class="hello">
            <p>Kacper Werakso</p>
        </div>
    </div><br><br><br><br><br>
        
        <div class="WeatherAll">
            <p class="WeatherTitle">Wprowadź nazwę miasta aby otrzymać informacje pogodowe</p><br>
                <input type="text" class="inputWeather" placeholder="..."><br><br>
                    <button class="buttonWeather"><p>Sprawdź</p></button><br><br><br>
                    <p class="warning"></p>
                <div class="WeatherDisplay">
                    <p class="city-name"></p>
                    <p class="weather"></p>
                    <p class="temperature"></p>
                    <p class="humidity"></p>
                    <p class="authorWeather"></p>
                </div>
        </div><br><br><br><br><br><br><br><br><br><br>

        <div class="footer">
            <p class="footerText">© 2023 Kacper Werakso</p>
        </div>
        <script src="./script.js"></script>
        <script>
            const inputWeather = document.querySelector('.inputWeather');
            const buttonWeather = document.querySelector('.buttonWeather');
            const cityName = document.querySelector('.city-name');
            const warning = document.querySelector('.warning');
            const photo = document.querySelector('.photo');
            const weather = document.querySelector('.weather');
            const temperature = document.querySelector('.temperature');
            const humidity = document.querySelector('.humidity');
            const authorWeather = document.querySelector('.authorWeather');

            const API_LINK = 'https://api.openweathermap.org/data/2.5/weather?q=';
            const API_KEY = '&appid=2854093abbef63b9ca5ed8d664ef6e71';
            const API_UNITS = '&units=metric';
            const API_LANG = '&lang=pl';

            const getWeather = async () => {
                const city = inputWeather.value || 'Polska';
                const URL = API_LINK + city + API_KEY + API_UNITS + API_LANG;

                try {
                    const res = await axios.get(URL);
                    console.log(res.data);
                    const temp = res.data.main.temp;
                    const hum = res.data.main.humidity;
                    const status = Object.assign({}, ...res.data.weather);

                    warning.textContent = '';
                    inputWeather.value = '';

                    cityName.innerHTML = '<br><br>' + res.data.name + '<br><br><br>';
                    temperature.innerHTML = 'Temperatura' + '<br><br>' + Math.floor(temp) + '℃' + '<br><br>';
                    humidity.innerHTML = 'Wilgotność' + '<br><br>' + hum + '%' + '<br><br>';
                    authorWeather.innerHTML = 'Autorem danych jest' + '<br>' + '<a href="https://openweathermap.org/" target="_blank" style="text-decoration: none; color: #1e1d23;">https://openweathermap.org/</a>' + '<br><br>';
                } catch (error) {
                    warning.innerHTML = 'Nieprawidłowa nazwa miasta';
                }
            };

            const enderCheck = e => {
                if (e.key === 'Enter') {
                    getWeather();
                }
            };

            inputWeather.addEventListener('keyup', enderCheck);
            buttonWeather.addEventListener('click', getWeather);
        </script>


    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    


        <script src="https://kit.fontawesome.com/34c494935b.js" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
        
    
    </body>
</html>